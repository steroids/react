# Архитектура UI компонентов

Steroids имеет собственный набор хороших компонентов для построения современных веб-приложений. Существует множество
UI Kit фреймворков, такие как Material UI, Ant Design, Blueprint, React Bootstrap и прочие.

Но у Steroids UI Kit есть отличительная особенность - раздельные `core` и `view` части для каждого компонента. Это
позволяет полностью менять отрисовку компонента, а не только стили, как это предлагается в вышеупомянутых фреймворках.


## Особенности и преимущества

- Раздельные `core` и `view` части для каждого компонента;
- Настройка стилей через SCSS variables;
- Можно полностью заменять как `*.scss`, так и `*.tsx` файлы компонентов для кастомизации;
- Легко добавлять собственные новые компоненты, используя существующие `HOC` обертки;
- Описанные на TypeScript интерфейсы для компонентов и их `view` частей;
- Возможность глобальной настройки (default props) как всех сразу, так и выбранных компонентов;
- Компоненты работают в связке компонентами приложения, роутингом и редаксом, становясь таким образом "умными"
компонентами и делают их использование еще удобней.


## Состав компонента

Каждый UI компонент (элемент формы, список, модальное окно, ...) - состоит из нескольких логических частей:

1. Core - ядро компонента. Оно содержит всю бизнес-логику компонента, принимает и обрабатывает полученные данные из
`props`, находит нужную "вьюшку" (`view`) компонента и прокидывает в нее подготовленные данные. Core компонент не 
содержит `jsx` кода и не обращается к DOM элементам. Он может использовать один или несколько `HOC` компонентов,
в которых так же содержится бизнес-логика.

2. View - отображение компонента. Это часть, которая отвечает за непосредственную отрисовку компонента. Она содержит
только `jsx` код и `scss` стили компонента с минимальным или отсутствующим кодом бизнес-логики. При кастомизации
компонента - его `*View.tsx` и/или `*View.scss` файлы могут (при необходимости) полностью копироваться в проект
и изменяться под свои нужды.


## Кастомизация компонента

Изменять внешний вид можно тремя способами, каждый из которых дополняет предыдущий способ. Данное руководство предлагает
следующий порядок определения способа кастомизации:

**1. Изменение SCSS variables.**

При использовании `@steroidsjs/bootstrap` пакета, который в свою очередь использует CSS
фреймворк [Bootstrap](https://getbootstrap.com/) версии 4, можно менять SCSS переменные, влияющие на цвета, формы,
шрифты и различные размеры компонентов. Во многих случаях этими переменными можно близко приблизить компоненты к
необходимому стилю. Если этого недостаточно - тогда смотрим следующий шаг.

**2. Переопределение `*.scss` файлов.**

Все файлы стилей подключаются через импорт `@steroidsjs/bootstrap/index.scss` файла
в стилях. Копируем в проект необходимые для переопределения `*.scss` файлы компонентов (например, `ButtonView.scss`),
дублируем вышеупомянутый `index.scss` файл в проект и меняем пути импорта. Таким образом, у нас в проекте получится
следующая структура:

```
    style
        index.scss - главный файл стилей, в нем подключаем 'ui/index.scss'
        variables.scss - scss переменные
    ui
        form
            Button
                ButtonView.scss - переопределенный файл стилей
        index.scss - копия из node_modules/steroidsjs/bootstrap/index.scss с измененным путем до ButtonView.scss
```

**3. Переопределение `*.tsx` файлов.**

Если изменение стилей недостаточно и необходимо изменить `jsx` код компонента, то в этом случае полностью копируется
`*.tsx` файл компонента. Подключаются эти файлы при инициализации приложения в файле `Application.tsx`:

```ts
@application({
    onInit: ({ui}) => {
        ui.addViews(require('ui').default); // Подгружаем переопределенный список "вьюшек" компонентов
        ui.addFields(require('@steroidsjs/core/ui/form').default);
        ui.addFormatters(require('@steroidsjs/core/ui/format').default);
        ui.addIcons(require('@steroidsjs/bootstrap/icon/fontawesome').default);
    },
})
export default class Application extends React.Component {
    // ...
}
```

Структура проекта получится следующая:

```
    ui
        form
            Button
                ButtonView.scss - переопределенный файл стилей
                ButtonView.tsx - переопределенный файл с jsx кодом
        index.scss
        index.ts - копия из node_modules/steroidsjs/bootstrap/index.ts с измененным путем до ButtonView.tsx
    Application.tsx - тут меняли вызов ui.addViews()
```